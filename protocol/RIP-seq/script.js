document.addEventListener("DOMContentLoaded",(function(e){var t,s=document.getElementById("steps-container"),n=document.getElementById("steps-content"),r=0,a=document.getElementById("substeps-container"),l=document.getElementById("substeps-content"),o=0,c=document.getElementById("prev-btn"),i=document.getElementById("next-btn"),u=[],p="";function d(){for(var e="",t=0;t<u.length;t++)e+='<button class="step-btn" data-step="'+t+'">'+u[t].title+"</button>";s.innerHTML=e;for(var a=document.getElementsByClassName("step-btn"),l=0;l<a.length;l++)a[l].addEventListener("click",(function(){r=parseInt(this.getAttribute("data-step")),o=0;var e=u[r];n.getElementsByTagName("h2")[0].innerHTML=e?u[r].title:"",m(),b(),v()}));var c=u[r];n.getElementsByTagName("h2")[0].innerHTML=c?u[r].title:""}function m(){var e,t=u[r],s="";if(t.substeps)for(var n=0;n<t.substeps.length;n++){var c=t.substeps[n];s+='<button class="'+(n===o?"substep-btn current-substep":"substep-btn")+'" data-substep="'+n+'">'+c.title+"</button>"}a.innerHTML=s;for(var i=document.getElementsByClassName("substep-btn"),p=0;p<i.length;p++)i[p].addEventListener("click",g);if(t.substeps?l.style.display="block":l.style.display="none",(e=l.querySelector("img"))&&e.remove(),t.substeps&&t.substeps[o]?(l.getElementsByTagName("h3")[0].innerHTML=t.substeps[o].title,l.getElementsByTagName("p")[0].innerHTML=t.substeps[o].content):(l.getElementsByTagName("h3")[0].innerHTML="",l.getElementsByTagName("p")[0].innerHTML=""),(e=l.querySelector("img"))&&e.parentNode.removeChild(e),t.substeps&&t.substeps[o]&&t.substeps[o].image){var d=document.createElement("img");d.src=t.substeps[o].image,l.appendChild(d)}}function g(){var e=parseInt(this.getAttribute("data-substep"));e!==o&&(o=e,m(),b(),v())}function b(){var e=u[r];c.disabled=0===r&&0===o,i.disabled=r===u.length-1&&o===e.substeps.length-1}function v(){var e=u.length,t=u[r].substeps?u[r].substeps.length:0,s=t?(r+(o+1)/(t+0))/e*100:100*r;document.getElementById("progress").style.width=s+"%";for(var n=document.getElementById("progress-label"),a=0,l=0;l<u.length;l++)a+=u[l].substeps.length;for(var c=0,i=0;i<r;i++)c+=u[i].substeps.length;c+=o,n.textContent="Progress: "+(c+1)+"/"+a;var p=document.getElementsByClassName("step-btn");for(i=0;i<p.length;i++)i<r?(p[i].classList.remove("current-step"),p[i].classList.add("completed-step")):i===r?(p[i].classList.add("current-step"),p[i].classList.remove("completed-step")):(p[i].classList.remove("current-step"),p[i].classList.remove("completed-step"));p[r].scrollIntoView({block:"nearest",inline:"center"});for(var d=document.getElementsByClassName("substep-btn"),m=0;m<d.length;m++)m<o?(d[m].classList.remove("current-substep"),d[m].classList.add("completed-substep")):m===o?(d[m].classList.add("current-substep"),d[m].classList.remove("completed-substep")):(d[m].classList.remove("current-substep"),d[m].classList.remove("completed-substep"));d[o].scrollIntoView({block:"nearest",inline:"center"})}c.addEventListener("click",(function(){o>0?o--:r>0&&(r--,o=u[r].substeps.length-1),d(),m(),b(),v()})),i.addEventListener("click",(function(){var e=u[r];o<e.substeps.length-1?o++:r<u.length-1&&(r++,o=0),d(),m(),b(),v()})),(t=new XMLHttpRequest).overrideMimeType("application/json"),t.open("GET","input.json",!0),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=JSON.parse(t.responseText);u=e.steps,p=e.title,document.getElementsByTagName("title")[0].innerHTML=p,document.getElementsByTagName("h1")[0].innerHTML=p,d(),m(),b(),v()}},document.addEventListener("keydown",(function(e){"ArrowUp"===e.key||"ArrowLeft"===e.key?c.click():"ArrowDown"!==e.key&&"ArrowRight"!==e.key||i.click()})),t.send()}));