document.addEventListener("DOMContentLoaded",(function(e){var t,s=document.getElementById("steps-container"),n=document.getElementById("steps-content"),r=0,a=document.getElementById("substeps-container"),l=document.getElementById("substeps-content"),o=0,c=document.getElementById("prev-btn"),i=document.getElementById("next-btn"),u=[],d="";function p(){for(var e="",t=0;t<u.length;t++)e+='<button class="step-btn" data-step="'+t+'">'+u[t].title+"</button>";s.innerHTML=e;for(var a=document.getElementsByClassName("step-btn"),l=0;l<a.length;l++)a[l].addEventListener("click",(function(){r=parseInt(this.getAttribute("data-step")),o=0;var e=u[r];n.getElementsByTagName("h2")[0].innerHTML=e?u[r].title:"",m(),g(),v()}));var c=u[r];n.getElementsByTagName("h2")[0].innerHTML=c?u[r].title:""}function m(){var e=u[r],t="";if(e.substeps)for(var s=0;s<e.substeps.length;s++){var n=e.substeps[s];t+='<button class="'+(s===o?"substep-btn current-substep":"substep-btn")+'" data-substep="'+s+'">'+n.title+"</button>"}a.innerHTML=t;for(var c=document.getElementsByClassName("substep-btn"),i=0;i<c.length;i++)c[i].addEventListener("click",b);e.substeps?l.style.display="block":l.style.display="none",e.substeps&&e.substeps[o]?(l.getElementsByTagName("h3")[0].innerHTML=e.substeps[o].title,l.getElementsByTagName("p")[0].innerHTML=e.substeps[o].content):(l.getElementsByTagName("h3")[0].innerHTML="",l.getElementsByTagName("p")[0].innerHTML="")}function b(){var e=parseInt(this.getAttribute("data-substep"));e!==o&&(o=e,m(),g(),v())}function g(){var e=u[r];c.disabled=0===r&&0===o,i.disabled=r===u.length-1&&o===e.substeps.length-1}function v(){var e=u.length,t=u[r].substeps?u[r].substeps.length:0,s=t?(r+(o+1)/(t+0))/e*100:100*r;document.getElementById("progress").style.width=s+"%";for(var n=document.getElementById("progress-label"),a=0,l=0;l<u.length;l++)a+=u[l].substeps.length;for(var c=0,i=0;i<r;i++)c+=u[i].substeps.length;c+=o,n.textContent="Progress: "+(c+1)+"/"+a;var d=document.getElementsByClassName("step-btn");for(i=0;i<d.length;i++)i<r?(d[i].classList.remove("current-step"),d[i].classList.add("completed-step")):i===r?(d[i].classList.add("current-step"),d[i].classList.remove("completed-step")):(d[i].classList.remove("current-step"),d[i].classList.remove("completed-step"));d[r].scrollIntoView({block:"nearest",inline:"center"});for(var p=document.getElementsByClassName("substep-btn"),m=0;m<p.length;m++)m<o?(p[m].classList.remove("current-substep"),p[m].classList.add("completed-substep")):m===o?(p[m].classList.add("current-substep"),p[m].classList.remove("completed-substep")):(p[m].classList.remove("current-substep"),p[m].classList.remove("completed-substep"));p[o].scrollIntoView({block:"nearest",inline:"center"})}c.addEventListener("click",(function(){o>0?o--:r>0&&(r--,o=u[r].substeps.length-1),p(),m(),g(),v()})),i.addEventListener("click",(function(){var e=u[r];o<e.substeps.length-1?o++:r<u.length-1&&(r++,o=0),p(),m(),g(),v()})),(t=new XMLHttpRequest).overrideMimeType("application/json"),t.open("GET","input.json",!0),t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=JSON.parse(t.responseText);u=e.steps,d=e.title,document.getElementsByTagName("title")[0].innerHTML=d,document.getElementsByTagName("h1")[0].innerHTML=d,p(),m(),g(),v()}},document.addEventListener("keydown",(function(e){"ArrowUp"===e.key||"ArrowLeft"===e.key?c.click():"ArrowDown"!==e.key&&"ArrowRight"!==e.key||i.click()})),t.send()}));